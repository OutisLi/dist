<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2024.02.21-1. Introduction to Scala</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.9f84806b.css" as="style"><link rel="preload" href="/assets/js/app.aca65f08.js" as="script"><link rel="preload" href="/assets/js/2.0c4bddf9.js" as="script"><link rel="preload" href="/assets/js/1.50b457b8.js" as="script"><link rel="preload" href="/assets/js/31.e3d87865.js" as="script"><link rel="prefetch" href="/assets/js/10.325b9f09.js"><link rel="prefetch" href="/assets/js/11.845e3692.js"><link rel="prefetch" href="/assets/js/12.ecdb524b.js"><link rel="prefetch" href="/assets/js/13.3f3f6a36.js"><link rel="prefetch" href="/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/assets/js/15.b60f3925.js"><link rel="prefetch" href="/assets/js/16.85253907.js"><link rel="prefetch" href="/assets/js/17.c2838453.js"><link rel="prefetch" href="/assets/js/18.3256f17f.js"><link rel="prefetch" href="/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/assets/js/20.10e47ab9.js"><link rel="prefetch" href="/assets/js/21.33b300c9.js"><link rel="prefetch" href="/assets/js/22.62284270.js"><link rel="prefetch" href="/assets/js/23.7db5debe.js"><link rel="prefetch" href="/assets/js/24.c7d90f40.js"><link rel="prefetch" href="/assets/js/25.6eea5c7e.js"><link rel="prefetch" href="/assets/js/26.9050baa1.js"><link rel="prefetch" href="/assets/js/27.580760bf.js"><link rel="prefetch" href="/assets/js/28.de97261b.js"><link rel="prefetch" href="/assets/js/29.6c399461.js"><link rel="prefetch" href="/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/assets/js/30.0d308e4d.js"><link rel="prefetch" href="/assets/js/32.06d47597.js"><link rel="prefetch" href="/assets/js/33.b2f53157.js"><link rel="prefetch" href="/assets/js/34.b56caa5e.js"><link rel="prefetch" href="/assets/js/35.3ddbf166.js"><link rel="prefetch" href="/assets/js/36.39948275.js"><link rel="prefetch" href="/assets/js/37.0d9f8801.js"><link rel="prefetch" href="/assets/js/38.fb00ff7f.js"><link rel="prefetch" href="/assets/js/39.336735c7.js"><link rel="prefetch" href="/assets/js/4.45665f8a.js"><link rel="prefetch" href="/assets/js/40.89589368.js"><link rel="prefetch" href="/assets/js/41.f8b893e2.js"><link rel="prefetch" href="/assets/js/42.02e366b2.js"><link rel="prefetch" href="/assets/js/43.04786f37.js"><link rel="prefetch" href="/assets/js/44.33f8b3ae.js"><link rel="prefetch" href="/assets/js/45.acb58579.js"><link rel="prefetch" href="/assets/js/46.26b94de1.js"><link rel="prefetch" href="/assets/js/47.0e4b18e7.js"><link rel="prefetch" href="/assets/js/48.21e56b0a.js"><link rel="prefetch" href="/assets/js/49.28eb16aa.js"><link rel="prefetch" href="/assets/js/5.7098d77a.js"><link rel="prefetch" href="/assets/js/50.7bec212f.js"><link rel="prefetch" href="/assets/js/51.b5f5758a.js"><link rel="prefetch" href="/assets/js/52.72a43db2.js"><link rel="prefetch" href="/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/assets/js/7.6a854e57.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.77260563.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9f84806b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/good.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="LeetCode" class="dropdown-title"><span class="title">LeetCode</span> <span class="arrow down"></span></button> <button type="button" aria-label="LeetCode" class="mobile-dropdown-title"><span class="title">LeetCode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          二叉树
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">
  Installation
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  xxx
</a></li></ul></li><li class="dropdown-item"><h4>
          滑动窗口
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">
  Installation
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  xxx
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Chip" class="dropdown-title"><span class="title">Chip</span> <span class="arrow down"></span></button> <button type="button" aria-label="Chip" class="mobile-dropdown-title"><span class="title">Chip</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          一生一芯
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Chip/Chip/一生一芯计划.html" class="nav-link">
  预学习
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  B阶段
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  A阶段
</a></li></ul></li><li class="dropdown-item"><h4>
          Chisel
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Chip/Chip/2024.02.21-Chisel.html" class="nav-link">
  Bootcamp
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  xxx
</a></li></ul></li><li class="dropdown-item"><h4>
          Verilog
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Chip/Chip/2023.11.07-Verilog语法.html" class="nav-link">
  Basic
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  xxx
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="LeetCode" class="dropdown-title"><span class="title">LeetCode</span> <span class="arrow down"></span></button> <button type="button" aria-label="LeetCode" class="mobile-dropdown-title"><span class="title">LeetCode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          二叉树
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">
  Installation
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  xxx
</a></li></ul></li><li class="dropdown-item"><h4>
          滑动窗口
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">
  Installation
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  xxx
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Chip" class="dropdown-title"><span class="title">Chip</span> <span class="arrow down"></span></button> <button type="button" aria-label="Chip" class="mobile-dropdown-title"><span class="title">Chip</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          一生一芯
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Chip/Chip/一生一芯计划.html" class="nav-link">
  预学习
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  B阶段
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  A阶段
</a></li></ul></li><li class="dropdown-item"><h4>
          Chisel
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Chip/Chip/2024.02.21-Chisel.html" class="nav-link">
  Bootcamp
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  xxx
</a></li></ul></li><li class="dropdown-item"><h4>
          Verilog
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Chip/Chip/2023.11.07-Verilog语法.html" class="nav-link">
  Basic
</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">
  xxx
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>2024 02 21 Chisel</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.21-1 Introduction to Scala.html" class="active sidebar-link">2024.02.21-1. Introduction to Scala</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.21-1 Introduction to Scala.html#variables-and-constants-var-and-val" class="sidebar-link">Variables and Constants - `var` and `val`</a></li><li class="sidebar-sub-header"><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.21-1 Introduction to Scala.html#conditionals" class="sidebar-link">Conditionals</a></li><li class="sidebar-sub-header"><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.21-1 Introduction to Scala.html#methods-functions" class="sidebar-link">Methods (Functions)</a></li><li class="sidebar-sub-header"><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.21-1 Introduction to Scala.html#overloading-functions" class="sidebar-link">Overloading Functions</a></li><li class="sidebar-sub-header"><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.21-1 Introduction to Scala.html#lists" class="sidebar-link">Lists</a></li><li class="sidebar-sub-header"><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.21-1 Introduction to Scala.html#for-statement" class="sidebar-link">`for` Statement</a></li><li class="sidebar-sub-header"><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.21-1 Introduction to Scala.html#packages-and-imports" class="sidebar-link">Packages and Imports</a></li><li class="sidebar-sub-header"><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.21-1 Introduction to Scala.html#class" class="sidebar-link">Class</a></li><li class="sidebar-sub-header"><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.21-1 Introduction to Scala.html#code-blocks" class="sidebar-link">Code Blocks</a></li></ul></li><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.23-2.1 First Chisel Module.html" class="sidebar-link">2024.02.23-2.1 First Chisel Module</a></li><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.24-2.2 Combinational Logic.html" class="sidebar-link">2024.02.24-2.2 Combinational Logic</a></li><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.25-2.3 Control Flow.html" class="sidebar-link">2024.02.25-2.3 Control Flow</a></li><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.26-2.4 Sequential Logic.html" class="sidebar-link">2024.02.26-2.4 Sequential Logic</a></li><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.28-2.5 FIR Filter.html" class="sidebar-link">2024.02.28-2.5 FIR Filter</a></li><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.29-2.6 More on ChiselTest.html" class="sidebar-link">2024.02.29-2.6 More on ChiselTest</a></li><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.03.01-3.1 Generators Parameters.html" class="sidebar-link">2024.03.01-3.1 Generators: Parameters</a></li><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.03.03-3.2 Generators Collections.html" class="sidebar-link">2024.03.03-3.2 Generators: Collections</a></li><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.03.04-3.3 Interlude Chisel Standard Library.html" class="sidebar-link">2024.03.04-3.3 Interlude: Chisel Standard Library</a></li><li><a href="/Chip/Chip/2024.02.21-Chisel/2024.03.05-3.4 Higher-Order Functions.html" class="sidebar-link">2024.03.05-3.4 Higher-Order Functions</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2024-02-21-1-introduction-to-scala"><a href="#_2024-02-21-1-introduction-to-scala" class="header-anchor">#</a> 2024.02.21-1. Introduction to Scala</h1> <h2 id="variables-and-constants-var-and-val"><a href="#variables-and-constants-var-and-val" class="header-anchor">#</a> <strong>Variables and Constants - <code>var</code> and <code>val</code></strong></h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">var</span> numberOfKittens <span class="token operator">=</span> <span class="token number">6</span>
<span class="token keyword">val</span> kittensPerHouse <span class="token operator">=</span> <span class="token number">101</span>
<span class="token keyword">val</span> alphabet <span class="token operator">=</span> <span class="token string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>
<span class="token keyword">var</span> done <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token comment">/*
numberOfKittens: Int = 6
kittensPerHouse: Int = 101
alphabet: String = &quot;abcdefghijklmnopqrstuvwxyz&quot;
done: Boolean = false
*/</span>
</code></pre></div><p>变量使用<code>var</code>声明，常量则使用<code>val</code></p> <h2 id="conditionals"><a href="#conditionals" class="header-anchor">#</a> <strong>Conditionals</strong></h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span><span class="token string">&quot;we are done&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>numberOfKittens <span class="token operator">&lt;</span> kittensPerHouse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span><span class="token string">&quot;more kittens!&quot;</span><span class="token punctuation">)</span>
    numberOfKittens <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
    done <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>类似于C++，如果只有一行，可以省略大括号</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span> likelyCharactersSet <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>alphabet<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">26</span><span class="token punctuation">)</span>
    <span class="token string">&quot;english&quot;</span>
<span class="token keyword">else</span> 
    <span class="token string">&quot;not english&quot;</span>

println<span class="token punctuation">(</span>likelyCharactersSet<span class="token punctuation">)</span>
<span class="token comment">// likelyCharactersSet: String = &quot;english&quot;</span>
</code></pre></div><p><code>if</code>这一串的返回值又所选择的分支的最后一行确定</p> <h2 id="methods-functions"><a href="#methods-functions" class="header-anchor">#</a> <strong>Methods (Functions)</strong></h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// Simple scaling function with an input argument, e.g., times2(3) returns 6</span>
<span class="token comment">// Curly braces can be omitted for short one-line functions.</span>
<span class="token keyword">def</span> times2<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> x

<span class="token comment">// More complicated function</span>
<span class="token keyword">def</span> distance<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> returnPositive<span class="token operator">:</span> <span class="token builtin">Boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> xy <span class="token operator">=</span> x <span class="token operator">*</span> y
    <span class="token keyword">if</span> <span class="token punctuation">(</span>returnPositive<span class="token punctuation">)</span> xy<span class="token punctuation">.</span>abs <span class="token keyword">else</span> <span class="token operator">-</span>xy<span class="token punctuation">.</span>abs
<span class="token punctuation">}</span>
</code></pre></div><h2 id="overloading-functions"><a href="#overloading-functions" class="header-anchor">#</a> <strong>Overloading Functions</strong></h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// Overloaded function</span>
<span class="token keyword">def</span> times2<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> x
<span class="token keyword">def</span> times2<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> x<span class="token punctuation">.</span>toInt

times2<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>   <span class="token comment">// 10</span>
times2<span class="token punctuation">(</span><span class="token string">&quot;7&quot;</span><span class="token punctuation">)</span>   <span class="token comment">// 14</span>
</code></pre></div><h3 id="recursive-and-nested-functions"><a href="#recursive-and-nested-functions" class="header-anchor">#</a> <strong>Recursive and Nested Functions</strong></h3> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> asciiTriangle<span class="token punctuation">(</span>rows<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// This is cute: multiplying &quot;X&quot; makes a string with many copies of &quot;X&quot;</span>
    <span class="token comment">// Unit means no return value</span>
    <span class="token keyword">def</span> printRow<span class="token punctuation">(</span>columns<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;X&quot;</span> <span class="token operator">*</span> columns<span class="token punctuation">)</span>
    
    <span class="token keyword">if</span><span class="token punctuation">(</span>rows <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        printRow<span class="token punctuation">(</span>rows<span class="token punctuation">)</span>
        asciiTriangle<span class="token punctuation">(</span>rows <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// Here is the recursive call</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// printRow(1) // This would not work, since we're calling printRow outside its scope</span>
asciiTriangle<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>

<span class="token comment">// Output:</span>
XXXXXX
XXXXX
XXXX
XXX
XX
X
</code></pre></div><h3 id="named-parameters-and-parameter-defaults"><a href="#named-parameters-and-parameter-defaults" class="header-anchor">#</a> <strong>Named Parameters and Parameter Defaults</strong></h3> <p>Consider the following method definition.</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> myMethod<span class="token punctuation">(</span>count<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> wrap<span class="token operator">:</span> <span class="token builtin">Boolean</span><span class="token punctuation">,</span> wrapValue<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span><span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><p>When calling the method, you will often see the parameter names along with the passed-in values.</p> <div class="language-scala extra-class"><pre class="language-scala"><code>myMethod<span class="token punctuation">(</span>count<span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> wrap<span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> wrapValue<span class="token operator">=</span> <span class="token number">23</span><span class="token punctuation">)</span>
</code></pre></div><p>Using named parameters, you can even call the function with a different ordering.</p> <div class="language-scala extra-class"><pre class="language-scala"><code>myMethod<span class="token punctuation">(</span>wrapValue<span class="token operator">=</span> <span class="token number">23</span><span class="token punctuation">,</span> wrap<span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> count<span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>For frequently called methods, the parameter ordering may be obvious. But for less common methods and, in particular, boolean arguments, including the names with calls can make your code a lot more readable. If methods have a long list of arguments of the same type, using names also decreases the chance of error. Parameters to class definitions also use this named argument scheme (they are actually just the parameters to the constructor method for the class).</p> <p>When certain parameters have default values (that don't need to be overridden), callers only have to pass (by name) specific arguments that do not use defaults. Notice that the parameter  <code>wrapValue</code> has a default value of 24. Therefore, this will work as if 24 had been passed in.</p> <div class="language-scala extra-class"><pre class="language-scala"><code>myMethod<span class="token punctuation">(</span>wrap<span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> count<span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="lists"><a href="#lists" class="header-anchor">#</a> <strong>Lists</strong></h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span> x <span class="token operator">=</span> <span class="token number">7</span>
<span class="token keyword">val</span> y <span class="token operator">=</span> <span class="token number">14</span>
<span class="token keyword">val</span> list1 <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> list2 <span class="token operator">=</span> x <span class="token operator">::</span> y <span class="token operator">::</span> y <span class="token operator">::</span> Nil       <span class="token comment">// An alternate notation for assembling a list</span>
                                     <span class="token comment">// Nil就是一个空的List[Nothing]，即一个可以封装任何类型元素但又没有元素的容器</span>

<span class="token keyword">val</span> list3 <span class="token operator">=</span> list1 <span class="token operator">++</span> list2           <span class="token comment">// Appends the second list to the first list</span>
<span class="token keyword">val</span> m <span class="token operator">=</span> list2<span class="token punctuation">.</span>length
<span class="token keyword">val</span> s <span class="token operator">=</span> list2<span class="token punctuation">.</span>size

<span class="token keyword">val</span> headOfList <span class="token operator">=</span> list1<span class="token punctuation">.</span>head          <span class="token comment">// Gets the first element of the list</span>
<span class="token keyword">val</span> restOfList <span class="token operator">=</span> list1<span class="token punctuation">.</span>tail          <span class="token comment">// Get a new list with first element removed</span>

<span class="token keyword">val</span> third <span class="token operator">=</span> list1<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>                 <span class="token comment">// Gets the third element of a list (0-indexed)</span>

<span class="token comment">// Output:</span>
x<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">7</span>
y<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">14</span>
list1<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
list2<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span>
list3<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span>
m<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">3</span>
s<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">3</span>
headOfList<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">1</span>
restOfList<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
third<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">3</span>
</code></pre></div><h2 id="for-statement"><a href="#for-statement" class="header-anchor">#</a> <strong><code>for</code> Statement</strong></h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> <span class="token number">0</span> to <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> print<span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token comment">// include 7</span>
println<span class="token punctuation">(</span><span class="token punctuation">)</span>

i <span class="token keyword">&lt;-</span> <span class="token number">0</span> until <span class="token number">7</span> <span class="token comment">// exclude 7</span>
i <span class="token keyword">&lt;-</span> <span class="token number">0</span> to <span class="token number">10</span> by <span class="token number">2</span>
</code></pre></div><p><strong><code>print</code></strong> 用于连续输出不换行，而 <strong><code>println</code></strong> 用于输出后换行。</p> <p><strong><code>&lt;-</code></strong> 是用在for循环构造中的一个操作符，表示从一个集合中逐一取出元素</p> <h2 id="packages-and-imports"><a href="#packages-and-imports" class="header-anchor">#</a> <strong>Packages and Imports</strong></h2> <ul><li><strong><code>package</code></strong> 用于定义一个命名空间，它可以包含类、对象和特质（traits），以及其他包。包主要用于组织和管理代码，防止命名冲突，并提供访问控制。</li> <li><strong><code>class</code></strong> 是定义数据结构及其行为的蓝图。它可以包含数据成员（属性）和方法。类用于实例化对象，每个对象都可以拥有不同的属性值。</li></ul> <p>**<code>import</code><strong>语句可以用来引入包、类、对象，甚至是特定的方法或属性。这意味着你可以使用</strong><code>import</code>**来引用几乎任何你需要的代码实体。以下是一些例子：</p> <ul><li>引入一个包中的所有成员：<strong><code>import scala.collection.mutable._</code></strong>，这里的**<code>_</code><strong>相当于Java中的</strong>``<strong>，表示引入</strong><code>mutable</code>**包下的所有成员。</li> <li>引入一个特定的类：<strong><code>import scala.collection.mutable.ListBuffer</code></strong>，这表示只引入**<code>ListBuffer</code>**类。</li> <li>引入一个包中的多个类：<strong><code>import scala.collection.mutable.{ArrayBuffer, LinkedList}</code></strong>，这表示同时引入**<code>ArrayBuffer</code><strong>和</strong><code>LinkedList</code>**两个类。</li> <li>引入一个对象中的特定成员：<strong><code>import java.lang.System.{out =&gt; stdout}</code></strong>，这里还演示了将**<code>System.out</code><strong>重命名为</strong><code>stdout</code>**，以便在代码中使用简化的名称。</li></ul> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// 从chisel3.iotesters包中引入特定的几个类：ChiselFlatSpec、Driver、和PeekPokeTester</span>
<span class="token keyword">import</span> <span class="token namespace">chisel3<span class="token punctuation">.</span>iotesters<span class="token punctuation">.</span></span><span class="token punctuation">{</span>ChiselFlatSpec<span class="token punctuation">,</span> Driver<span class="token punctuation">,</span> PeekPokeTester<span class="token punctuation">}</span>
</code></pre></div><h2 id="class"><a href="#class" class="header-anchor">#</a> <strong>Class</strong></h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// WrapCounter counts up to a max value based on a bit size</span>
<span class="token keyword">class</span> WrapCounter<span class="token punctuation">(</span>counterBits<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">val</span> max<span class="token operator">:</span> <span class="token builtin">Long</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> counterBits<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
  <span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token number">0L</span>
    
  <span class="token keyword">def</span> inc<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Long</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    counter <span class="token operator">=</span> counter <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>counter <span class="token operator">&gt;</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        counter <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
    counter
  <span class="token punctuation">}</span>
  println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;counter created with max value </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">max</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p><code>class WrapCounter</code> -- This is the definition of <strong>WrapCounter</strong>.</p></li> <li><p><code>(counterBits: Int)</code> -- Creating a WrapCounter requires an integer parameter, nicely named to suggest it is the bit width of the counter.</p></li> <li><p>Braces ({}) delimit a block of code. Most classes use a code block to define variables, constants, and methods (functions).</p></li> <li><p><code>val max: Long =</code> -- the class contains a member variable <strong>max</strong>, declared as type <code>Long</code> and initialized as the class is created.</p></li> <li><p><code>(1 &lt;&lt; counterBits) - 1</code> computes the maximum value that can be contained in <strong>counterBits</strong> bits. Since <strong>max</strong> was created with <code>val</code> it cannot be changed.</p></li> <li><p>A variable <strong>counter</strong> is created and initialized to <strong>0L</strong>. The <strong>L</strong> says that 0 is a long value; thus, <strong>counter</strong> is inferred to be Long.</p></li> <li><p><strong>max</strong> and <strong>counter</strong> are commonly called <em>member variables</em> of the class.</p></li> <li><p>A class method <strong>inc</strong> is defined which takes no arguments and returns a <strong>Long</strong> value.</p></li> <li><p>The body of the method <strong>inc</strong> is a code block that has:</p> <ul><li><code>counter = counter + 1</code> increments <strong>counter</strong>.</li> <li><code>if (counter &gt; max) { counter = 0 }</code> tests if the counter is greater than the <strong>max</strong> value and sets it back to zero if it is.</li> <li><code>counter</code> -- The last line of the code block is important.
<ul><li>Any value expressed as the last line of a code block is considered to be the return value of that code block. The return value can be used or ignored by the calling statement.</li> <li>This applies quite generally; for example, since an <code>if</code> then <code>else</code> statement defines its true and false clauses with code blocks, it can return a value i.e., <code>val result = if (10 * 10 &gt; 90) &quot;greater&quot; else &quot;lesser&quot;</code> would create a <code>val</code> with the value &quot;greater&quot;.</li></ul></li> <li>So in this case the function <strong>inc</strong> returns the value of <strong>counter</strong>.</li></ul></li> <li><p><code>println(s&quot;counter created with max value $max&quot;)</code> prints a string to standard output. Because the <strong>println</strong> is directly in the defining code block, it is part of the class initialization code and is run, i.e. prints out the string, every time an instance of this class is created.</p></li> <li><p>The string printed in this case is an <em>interpolated</em> string.</p> <ul><li>The leading <strong>s</strong> in front of the first double quote identifies this as an interpolated string.</li> <li>An interpolated string is processed at run time.</li> <li>The <strong>$max</strong> is replaced with the value of max.</li> <li>If the <strong>$</strong> is followed by a code block, arbitrary Scala can be in that code block.
<ul><li>For example, <strong><code>println(s&quot;doubled max is ${max + max}&quot;)</code></strong>.</li> <li>The return value of this code block will be inserted in place of <code>${...}</code>.</li> <li>If the return value is not a string, it will be converted to one; virtually every class or type in scala has an implicit conversion to a string defined).</li></ul></li> <li>You should generally avoid printing something every time an instance of a class is created to avoid flooding standard output, unless you're debugging.</li></ul> <h3 id="creating-an-instance-of-a-class"><a href="#creating-an-instance-of-a-class" class="header-anchor">#</a> <strong>Creating an Instance of a Class</strong></h3> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span> x <span class="token operator">=</span> <span class="token keyword">new</span> WrapCounter<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
x<span class="token punctuation">.</span>inc<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Increments the counter</span>

<span class="token comment">// Member variables of the instance x are visible to the outside, unless they are declared private</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>counter <span class="token operator">==</span> x<span class="token punctuation">.</span>max<span class="token punctuation">)</span> <span class="token punctuation">{</span>              
    println<span class="token punctuation">(</span><span class="token string">&quot;counter is about to wrap&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

x inc<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Scala allows the dots to be omitted; this can be useful for making embedded DSL's look more natural</span>
</code></pre></div><p>有时候实例化类时不需要使用**<code>new</code><strong>关键字，这通常是因为该类定义了一个或多个</strong><code>apply</code><strong>方法。</strong><code>apply</code><strong>方法可以在类的伴生对象（companion object）中定义，允许你直接通过类名加括号的方式创建类的实例，而不需要显式地使用</strong><code>new</code><strong>关键字。这种方式提供了一种更简洁的语法来创建对象，同时也可以在</strong><code>apply</code>**方法内部执行初始化操作或参数处理，为对象创建提供更多的灵活性和控制。</p> <p>例如，假设有一个名为**<code>Person</code><strong>的类及其伴生对象，伴生对象中定义了</strong><code>apply</code>**方法：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person<span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span>

<span class="token keyword">object</span> Person <span class="token punctuation">{</span>
  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token keyword">new</span> Person<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在这个例子中，可以通过调用**<code>Person</code><strong>伴生对象的</strong><code>apply</code><strong>方法来创建</strong><code>Person</code><strong>类的实例，而不需要使用</strong><code>new</code>**关键字：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span> person <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// 相当于调用 Person.apply(&quot;Alice&quot;)</span>
</code></pre></div><p>这里，**<code>Person(&quot;Alice&quot;)</code><strong>实际上调用的是伴生对象中的</strong><code>apply</code><strong>方法，该方法内部使用</strong><code>new</code><strong>关键字创建了</strong><code>Person</code>**类的实例。这种方式使得代码看起来更简洁，同时保留了通过构造函数创建对象的灵活性。</p></li></ul> <h2 id="code-blocks"><a href="#code-blocks" class="header-anchor">#</a> <strong>Code Blocks</strong></h2> <p>Code blocks are delimited by braces. A block can contain zero or more lines of Scala code. The last line of Scala code becomes the return value (which may be ignored) of the code block. A code block with no lines would return a special null-like object called <code>Unit</code>. Code blocks are used throughout Scala: they are the bodies of class definitions, they form function and method definitions, they are the clauses of <code>if</code> statements, and they are the bodies of <code>for</code> and many other Scala operators.</p> <h3 id="parameterized-code-blocks"><a href="#parameterized-code-blocks" class="header-anchor">#</a> <strong>Parameterized Code Blocks</strong></h3> <p>Code blocks can take parameters. In the case of class and method definitions, these parameters look like those in most conventional programming languages. In the example below, <code>c</code> and <code>s</code> are parameters of the code blocks.</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// A one-line code block doesn't need to be enclosed in {}</span>
<span class="token keyword">def</span> add1<span class="token punctuation">(</span>c<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> c <span class="token operator">+</span> <span class="token number">1</span>

<span class="token keyword">class</span> RepeatString<span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> repeatedString <span class="token operator">=</span> s <span class="token operator">+</span> s
<span class="token punctuation">}</span>
</code></pre></div><p><strong>IMPORTANT</strong>: There is another way in which code blocks may be parameterized. Here is an example.</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span> intList <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> stringList <span class="token operator">=</span> intList<span class="token punctuation">.</span>map <span class="token punctuation">{</span> i <span class="token keyword">=&gt;</span>
    i<span class="token punctuation">.</span>toString
<span class="token punctuation">}</span>
</code></pre></div><p>使用**<code>map</code><strong>方法对</strong><code>intList</code><strong>中的每个元素应用一个函数，该函数将整数转换为其对应的字符串表示。具体来说，</strong><code>map</code><strong>方法遍历</strong><code>intList</code><strong>中的每个元素（用</strong><code>i</code><strong>表示），并对每个元素执行</strong><code>i.toString</code>**操作，将其转换为字符串。This type of code block is called an anonymous function, and more details on anonymous functions are provided in a later module.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Chip/Chip/2024.02.21-Chisel/2024.02.23-2.1 First Chisel Module.html">
        2024.02.23-2.1 First Chisel Module
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.aca65f08.js" defer></script><script src="/assets/js/2.0c4bddf9.js" defer></script><script src="/assets/js/1.50b457b8.js" defer></script><script src="/assets/js/31.e3d87865.js" defer></script>
  </body>
</html>
